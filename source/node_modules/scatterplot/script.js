var deslocX = 100;
var deslocY = 100;

//Width and height
var w = 800 + deslocX;
var h = 600 + deslocY;

//Create SVG element
var svg = d3.select("body")
	.append("svg")
	.attr("width", w)
	.attr("height", h);

inter_war = inter_war.war_data
	.map(function(d) {
		return {
			id: d.war_id,
			name: d.war_name,
			start1: new Date(d.start_year1, d.start_month1-1, d.start_day1),
			end1: new Date(d.end_year1, d.end_month1-1, d.end_day1),
			// start2: (d.end_day2 == -8)? 0: new Date(d.start_year2, d.start_month2-1, d.start_day2),
			// end2: (d.end_day2 == -8)? 0: new Date(d.end_year2, d.start_month2-1, d.start_day2),
			deaths: d.bat_death
		};
	});

var wars = [];
var wars_id = [];
var idx;

for (var i = 0; i < inter_war.length; i++) {

	idx = wars_id.indexOf(inter_war[i].id);

	if (idx == -1) {
		wars.push(inter_war[i]);
		wars_id.push(inter_war[i].id);
	}
	else {
		wars[idx].start1 = Math.min(wars[idx].start1, inter_war[i].start1);
		wars[idx].end1 = Math.max(wars[idx].end1, inter_war[i].end1);
	}
}

inter_war = wars.map(function(d) {
	return {
		id: d.id,
		name: d.name,
		x: (d.end1 - d.start1) / (3600 * 24000),
		y: d.deaths,
		class: d.start1 / (3600 * 24000)
	};
});

var scat = new Scatterplot({
	id: "myGeoMap",
	container: svg,
	x: deslocX,
	y: deslocY,
	width: w - deslocX,
	height: h - deslocY,
	dataset: inter_war
});
